function Progressbar(t){this.bar=$(t)}Progressbar.prototype.start=function(t){var r=this,n=r.bar;r.stop(),n.css("width","0%"),n.animate({width:"100%"},t,"linear")},Progressbar.prototype.stop=function(){this.bar.stop()},function(t){function r(){return(new Date).getTime()}function n(t){var r=t.find(".image"),n=t.data("index"),a={count:r.length,index:parseInt(n),first:r.first()};return a}function a(a,e){var i,s=n(a),o=a.data("progressbar"),d=a.data("duration");"forward"===e?i=(s.index+1)%s.count:(i=s.index-1,0>i&&(i=s.count-1)),a.find(".active").removeClass("active"),t(a.find(".image")[i]).find(".content").addClass("active"),a.data("index",i),a.data("last-switch",r()),s.first.css("margin-left","-"+100*i+"%"),d>0&&o.start(d)}t.fn.slideshow=function(n){function a(){var t=i.data("last-switch"),n=r(),e=n-t;e>=d?(i.nextFrame(),setTimeout(a,d)):setTimeout(a,d-e)}var e=t.extend({duration:0},n),i=this,s=i.find(".progress > .bar"),o=new Progressbar(s),d=1e3*e.duration;return i.data("index",1),i.data("progressbar",o),i.data("duration",d),i.find(".hidden").removeClass("hidden"),i.previousFrame(),d>0&&setTimeout(a,d),i.find(".left").click(function(){i.previousFrame()}),i.find(".right").click(function(){i.nextFrame()}),this},t.fn.nextFrame=function(){var t=this;return a(t,"forward"),t},t.fn.previousFrame=function(){var t=this;return a(t,"backward"),t}}(jQuery);